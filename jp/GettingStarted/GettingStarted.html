<!doctype html><html lang=jp><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Getting Started</title><link rel="shortcut icon" type=image/x-icon href=/hugo-theme-vivliocli/img/favicon.ico><link rel=stylesheet href=/hugo-theme-vivliocli/css/vivlio-theme-manual.css><aside id=menu><input type=checkbox id=humburger-btn-check>
<label for=humburger-btn-check class=humburger-btn><span></span></label><div class=menu-content><section id=menu-header><div class=logo><img src=/hugo-theme-vivliocli/img/logo.png></div></section><h4><a href=https://mochimochiki.github.io/hugo-theme-vivliocli/jp/>Hugo-theme-vivliocli</a></h4><ul><li><a href=/hugo-theme-vivliocli/jp/GettingStarted.html>1 Getting Started</a><ul><li><a href=/hugo-theme-vivliocli/jp/GettingStarted/GettingStarted.html id=menu-selected class=menu-selected>1.1 Getting Started</a></ul><li><a href=/hugo-theme-vivliocli/jp/Configuration.html>2 hugo-theme-vivliocli</a><li><a href=/hugo-theme-vivliocli/jp/Test.html>3 Test</a></ul><section id=menu-footer><hr><div class=language-selector><select class=select-language onchange="location=this.value;">
<option id=jp value=/hugo-theme-vivliocli/jp/GettingStarted/GettingStarted.html selected>Japanese</option></select></div><div class=menu-footer><a href=/hugo-theme-vivliocli/jp/tags.html>tags</a></div><hr><div class=menu-footer-space></div></section></div></aside></head><body><div id=content><h1>1.1 Getting Started</h1><nav id=TableOfContents><ul><li><a href=#%e5%af%be%e8%b1%a1%e7%92%b0%e5%a2%83 class=pdftoc>1.1.1 対象環境</a></li><li><a href=#%e3%82%a4%e3%83%b3%e3%82%b9%e3%83%88%e3%83%bc%e3%83%ab class=pdftoc>1.1.2 インストール</a><ul><li><a href=#hugo-theme-vivliocli%e3%81%ae%e3%82%a4%e3%83%b3%e3%82%b9%e3%83%88%e3%83%bc%e3%83%ab>hugo-theme-vivliocliのインストール</a></li><li><a href=#examplesite%e3%81%8b%e3%82%89%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%82%92%e3%82%b3%e3%83%94%e3%83%bc%e3%81%99%e3%82%8b>exampleSiteからファイルをコピーする</a></li></ul></li><li><a href=#%e6%9c%80%e5%88%9d%e3%81%ae%e3%82%b5%e3%82%a4%e3%83%88%e3%81%ae%e4%bd%9c%e6%88%90 class=pdftoc>1.1.3 最初のサイトの作成</a><ul><li><a href=#configtoml%e3%81%ae%e7%b7%a8%e9%9b%86>config.tomlの編集</a></li><li><a href=#%e8%a1%a8%e7%b4%99%e3%81%ae%e4%bd%9c%e6%88%90>表紙の作成</a></li><li><a href=#%e8%a8%98%e4%ba%8b%e3%81%ae%e4%bd%9c%e6%88%90>記事の作成</a></li><li><a href=#%e3%83%93%e3%83%ab%e3%83%89>ビルド</a></li><li><a href=#%e3%82%bb%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3%e7%95%aa%e5%8f%b7%e3%82%92%e3%82%ab%e3%82%b9%e3%82%bf%e3%83%9e%e3%82%a4%e3%82%ba%e3%81%99%e3%82%8b>セクション番号をカスタマイズする</a></li></ul></li><li><a href=#nextstep class=pdftoc>1.1.4 NextStep</a></li></ul></nav><h2 class=pdftoc id=対象環境>1.1.1 対象環境<a class=header-anchor href=#対象環境>¶</a></h2><p>本解説は Windows 10 を対象環境としています。</p><h2 class=pdftoc id=インストール>1.1.2 インストール<a class=header-anchor href=#インストール>¶</a></h2><p><a href=https://gohugo.io/>Hugo</a>のインストールがまだであればインストールしておきます。<code>v0.68</code>以上に対応しています（フロントマターで<a href=https://gohugo.io/content-management/build-options/#list>_buildオプションのlist</a>を使用しているため）。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat>hugo version
:<span style=color:#75715e>: Hugo Static Site Generator v0.80.0 ...</span>
</code></pre></div><p>本テーマでは<a href=https://github.com/vivliostyle/vivliostyle-cli>vivliostyle-cli</a>を利用してPDF出力を行うため、<a href=https://nodejs.org/ja/>Node.js</a>およびvivliostyle-cliのインストールを実施します。以下はchocotaleyを用いた導入例です。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat>choco install -y nodejs

node -v
:<span style=color:#75715e>: v15.9.0</span>
:<span style=color:#75715e>: note: vivliostyle-cli is not working in Node v14.0.0</span>

npm -v
:<span style=color:#75715e>: 7.5.3</span>

npm install -g @vivliostyle/cli
vivliostyle -v
:<span style=color:#75715e>: cli: 3.0.3</span>
:<span style=color:#75715e>: core: 2.4.2</span>
</code></pre></div><h3 id=hugo-theme-vivliocliのインストール>hugo-theme-vivliocliのインストール<a class=header-anchor href=#hugo-theme-vivliocliのインストール>¶</a></h3><p>新しいプロジェクトを作成します。ここでは<code>myPDF</code>という名称とします。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat>hugo new site myPDF
<span style=color:#66d9ef>cd</span> myPDF
</code></pre></div><p>次にテーマをsubmoduleとして導入します。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat>git init
git submodule add https://github.com/mochimochiki/hugo-theme-vivliocli themes/hugo-theme-vivliocli
</code></pre></div><p>gitを利用しない場合は、<a href=https://github.com/mochimochiki/hugo-theme-vivliocli/archive/master.zip>zip</a>をダウンロード・解凍し、<code>themes\hugo-theme-vivliocil</code>に配置します。</p><h3 id=examplesiteからファイルをコピーする>exampleSiteからファイルをコピーする<a class=header-anchor href=#examplesiteからファイルをコピーする>¶</a></h3><p>テーマの中にテンプレートとして利用できるexampleSiteがあります。exampleSiteから必要なファイルをコピーします。また、デフォルトのconfig.tomlは削除しておきます。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat>xcopy /s themes\hugo-theme-vivliocli\exampleSite\config config\
xcopy /s themes\hugo-theme-vivliocli\exampleSite\CI CI\
rm config.toml
</code></pre></div><h2 class=pdftoc id=最初のサイトの作成>1.1.3 最初のサイトの作成<a class=header-anchor href=#最初のサイトの作成>¶</a></h2><h3 id=configtomlの編集>config.tomlの編集<a class=header-anchor href=#configtomlの編集>¶</a></h3><p><code>config\_default\config.toml</code>を開き、以下の行をコメントアウトもしくは削除します。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=color:#a6e22e>themesdir</span> = <span style=color:#e6db74>&#34;../..&#34;</span>
</code></pre></div><h3 id=表紙の作成>表紙の作成<a class=header-anchor href=#表紙の作成>¶</a></h3><p><code>content</code>ディレクトリ下に<code>jp\firstpdf</code>,<code>en\firstpdf</code>ディレクトリを作成します。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=color:#66d9ef>mkdir</span> content\jp\firstpdf
<span style=color:#66d9ef>mkdir</span> content\en\firstpdf
</code></pre></div><p>次に<code>jp\firstpdf\_pdf.md</code>ファイルを作成して以下のように編集し、文字コードUTF-8で保存します。このファイルはPDFの表紙/前書/目次となります。PDF出力したいディレクトリに<code>_pdf.md</code>を置く、と覚えておきましょう。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>---
pdfname :
  default: <span style=color:#e6db74>&#34;firstpdf&#34;</span> <span style=color:#75715e># pdfファイル名。他とかぶらないようにする。</span>
doctitle:
  default: <span style=color:#e6db74>&#34;タイトル&#34;</span>
subtitle:
  default: <span style=color:#e6db74>&#34;サブタイトル&#34;</span>
pagesize: <span style=color:#e6db74>&#34;A4&#34;</span>
colophon: false
outputs:
- vivlio_cover
- vivlio_config
---
</code></pre></div><div class=note><div class=note_title>Note</div><div class=note_content><p>colophon: true とすると奥付ページも生成されます。<code>_pdfcolophon.md</code>も必要になります。<br>参考：<a href=../Configuration/pdfconfig.html>pdf configファイルの作成</a></p></div></div><h3 id=記事の作成>記事の作成<a class=header-anchor href=#記事の作成>¶</a></h3><p>次に記事を作成します。<code>\content\jp\firstpdf</code>に<code>_index.md</code>を作成して以下のように編集します。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>---
title: &#34;firstpdf&#34;
weight: 10
---

<span style=color:#e6db74>`_index.md`</span>はサイト上のセクションページになります。PDFには含まれません。
</code></pre></div><p>また<code>\content\jp\firstpdf</code>下に<code>first.md</code>, <code>second.md</code>を作成して以下のように編集して保存します。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>---
title: &#34;最初の記事&#34;
weight: 10
---

<span style=color:#75715e>## 最初の記事
</span><span style=color:#75715e></span>
こんにちは。これは最初の記事です。
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md>---
title: &#34;次の記事&#34;
weight: 20
---

<span style=color:#75715e>## 次の記事
</span><span style=color:#75715e></span>
こんにちは。これは次の記事です。
</code></pre></div><p>以下のコマンドでHugoのプレビューを表示し、記事が表示されることを確認します。記事を編集して保存すると、LiveReloadがかかり、プレビューも更新されます。</p><pre><code>hugo server
</code></pre><h3 id=ビルド>ビルド<a class=header-anchor href=#ビルド>¶</a></h3><p><code>Ctrl+C</code> でhugoのプレビューを終了し、以下のコマンドを実行してHugoサイトをビルドします。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat>hugo -e pdf
</code></pre></div><p><code>-e</code>オプションに<code>pdf</code>をつけることで、<code>/config/pdf/config.toml</code>の設定を適用しています。詳細は<a href=../Configuration/config.html>config.tomlの設定</a>を参照してください。</p><p>これで<code>/public_pdf</code>にHugoサイトがビルドされました。firstpdfは<code>/public_pdf/jp/firstpdf</code>に出力されているはずです。次にfirstpdfを<code>vivliostyle-cli</code>でPDF出力します。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=color:#66d9ef>cd</span> .\public_pdf\jp
<span style=color:#66d9ef>move</span> /Y firstpdf\_pdf.vivlio.config.js .
<span style=color:#66d9ef>move</span> /Y firstpdf\_pdf.vivlio.cover.html .
vivliostyle build -c _pdf.vivlio.config.js
</code></pre></div><p><code>_pdf.vivlio.config.js</code>, <code>_pdf.vivlio.cover.html</code>を移動しています。これらは<code>_pdf.md</code>から生成されたもので、ビルド時に<code>.\public_pdf\jp</code>直下に置く必要があるため、あらかじめ移動してからconfigファイルを指定してビルドしています。</p><p><code>\public_pdf\jp\firstPDF.pdf</code>が成果物です。確認してみましょう。</p><h3 id=セクション番号をカスタマイズする>セクション番号をカスタマイズする<a class=header-anchor href=#セクション番号をカスタマイズする>¶</a></h3><p>成果物には第1章、1.1、などのセクション番号が付与されています。これは<code>config.toml</code>でカスタマイズすることができます。<code>\config\pdf\config.toml</code>を開き、以下の箇所を変更してみましょう。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sectionNumberLevel <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span> <span style=color:#75715e># -&gt; 1に変更</span>
...
  <span style=color:#f92672>[</span>languages.jp.params<span style=color:#f92672>]</span>
    sectionTopFormat <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;第%s章&#34;</span> <span style=color:#75715e># -&gt; この行を削除もしくはコメントアウト</span>
</code></pre></div><blockquote><p>その他のconfigパラメータについては<a href=../Configuration/config.html>ヘルプの構成</a>および<a href=https://gohugo.io/getting-started/configuration/>HUGO公式ドキュメント</a>などを参照してください。</p></blockquote><p>一旦<code>public_pdf</code>を消して、今度は<code>build.bat</code>でビルドしてみます。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=color:#66d9ef>cd</span> ..\..
<span style=color:#66d9ef>rmdir</span> public_pdf /s /q
.\CI\build.bat
</code></pre></div><blockquote><p>もしエラーが出力された場合、PDFを開きっぱなしにしていないか確認してください。開いているとPDFの上書きに失敗します。</p></blockquote><p><code>public_pdf\jp\firstpdf.pdf</code> を見てみましょう。以下のことを確認します。</p><ul><li><code>sectionNumberLevel = 1</code>としたことでセクション番号がトップレベルのみ表示されている</li><li>同時にPDFの目次にもトップレベルのみが表示されるようになっている</li><li><code>sectionTopFormat</code>の指定をやめたことで「第1章」ではなく単に「1」となっている</li></ul><p>ビルドには<code>build.bat</code>を利用すれば、config/coverファイルのコピーを手動でやる必要がありません。</p><h2 class=pdftoc id=nextstep>1.1.4 NextStep<a class=header-anchor href=#nextstep>¶</a></h2><ul><li>PDFの表紙や奥付をカスタマイズするには&mldr;<a href=../Configuration/config.html>config.tomlの設定</a></li><li>複数のエディションを作るには&mldr;<a href=../Configuration/edition.html>エディション</a></li></ul></div><script src=/hugo-theme-vivliocli/js/menuscroll.js></script><script src=/hugo-theme-vivliocli/js/clipboard.js></script></body></html>