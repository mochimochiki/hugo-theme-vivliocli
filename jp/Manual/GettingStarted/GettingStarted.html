<!doctype html><html lang=jp><head><meta charset=utf-8><meta data-id=dfe2b86b7cc34993d439fe998ba7c3ed><meta name=viewport content="width=device-width,initial-scale=1"><title>Getting Started</title><link rel="shortcut icon" type=image/x-icon href=../../../img/favicon.ico><link rel=stylesheet href=../../../css/style-main.css><link rel=stylesheet href=../../../css/style-browser.css><link rel=stylesheet href=../../../css/page-counter-book.css><link rel=stylesheet href=../../../css/style-book.css><link rel=stylesheet href=../../../css/style-first.css><input type=checkbox id=accordion-btn-check>
<label for=accordion-btn-check class=accordion-btn><span></span></label><aside id=menu><input type=checkbox id=humburger-btn-check>
<label for=humburger-btn-check class=humburger-btn><span></span></label><div class=menu-content><section id=menu-header><div class=logo><img src=../../../img/logo.png></div></section><h4><a href=../../../jp/index.html>Hugo-theme-vivliocli</a></h4><nav id=menu-navigation><ul><details><summary><a href=../../../jp/Manual.html id=c227826866e5ab6b98f048b55d14b8b0>Manual</a></summary><ul><details><summary><a href=../../../jp/Manual/GettingStarted.html id=61d4ed797fc9ca3993bb3cd05bf389da>第1章 Getting Started</a></summary><ul><li><a href=../../../jp/Manual/GettingStarted/GettingStarted.html id=dfe2b86b7cc34993d439fe998ba7c3ed>1.1 Getting Started</a></ul></details><details><summary><a href=../../../jp/Manual/Configuration.html id=69dd4011c1f329fe96f5a51199f98418>第2章 hugo-theme-vivliocli</a></summary><ul><li><a href=../../../jp/Manual/Configuration/config.html id=8130aacfa858aa72a0a436df6eb38d33>2.1 config.tomlの設定</a><li><a href=../../../jp/Manual/Configuration/pdfconfig.html id=7fd84f89c9e504a9f3edde2284cf2ce3>2.2 pdf configファイルの作成</a><li><a href=../../../jp/Manual/Configuration/shortcodes.html id=68e7ffa667e11f72c1aa241cb80916a2>2.3 ショートコード</a><li><a href=../../../jp/Manual/Configuration/frontmatter.html id=32df05324e5791c33bf1664b6f1d9591>2.4 フロントマター・記事</a><li><a href=../../../jp/Manual/Configuration/MarkdownShowcase.html id=42ce3a133f63ff788e6fa973f03c2296>2.5 Markdownショーケース</a><li><a href=../../../jp/Manual/Configuration/edition.html id=ff37f16da7115adff7500132a23c965d>2.6 エディション</a><li><a href=../../../jp/Manual/Configuration/Tags.html id=d39e93453960c8e09ed357de294767f6>2.7 ページにタグ付けする</a></ul></details></ul></details></ul></nav><section id=menu-footer><hr><div class=language-selector><details class=select-language><summary>Languages</summary><div class=one-language><a href=../../../jp/Manual/GettingStarted/GettingStarted.html>Japanese</a></div></details></div><div class=menu-footer><a href=../../../jp/tags.html>tags</a></div><hr><div class=menu-footer-space></div></section></div></aside></head><body><input type=checkbox id=right-accordion-btn-check>
<label for=right-accordion-btn-check class=right-accordion-btn><span></span></label><div id=content><input type=checkbox id=pagetoc-accordion-btn-check>
<label for=pagetoc-accordion-btn-check class=pagetoc-accordion-btn>目次</label><nav id=TableOfContents-sidebar><div class=taglist><li><a href=../../../jp/tags/tutorial.html>tutorial</a></li></div><ul><details open><summary><a href=#%e5%af%be%e8%b1%a1%e7%92%b0%e5%a2%83>対象環境</a></summary></details>
<details open><summary><a href=#%e3%82%a4%e3%83%b3%e3%82%b9%e3%83%88%e3%83%bc%e3%83%ab>インストール</a></summary><ul><li><a href=#hugo-theme-vivliocli%e3%81%ae%e3%82%a4%e3%83%b3%e3%82%b9%e3%83%88%e3%83%bc%e3%83%ab>hugo-theme-vivliocliのインストール</a></li><li><a href=#examplesite%e3%81%8b%e3%82%89%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%82%92%e3%82%b3%e3%83%94%e3%83%bc%e3%81%99%e3%82%8b>exampleSiteからファイルをコピーする</a></li></ul></details><details open><summary><a href=#%e6%9c%80%e5%88%9d%e3%81%ae%e3%82%b5%e3%82%a4%e3%83%88%e3%81%ae%e4%bd%9c%e6%88%90>最初のサイトの作成</a></summary><ul><li><a href=#configtoml%e3%81%ae%e7%b7%a8%e9%9b%86>config.tomlの編集</a></li><li><a href=#%e8%a1%a8%e7%b4%99%e3%81%ae%e4%bd%9c%e6%88%90>表紙の作成</a></li><li><a href=#%e8%a8%98%e4%ba%8b%e3%81%ae%e4%bd%9c%e6%88%90>記事の作成</a></li><li><a href=#%e3%83%93%e3%83%ab%e3%83%89>ビルド</a></li><li><a href=#%e3%82%bb%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3%e7%95%aa%e5%8f%b7%e3%82%92%e3%82%ab%e3%82%b9%e3%82%bf%e3%83%9e%e3%82%a4%e3%82%ba%e3%81%99%e3%82%8b>セクション番号をカスタマイズする</a></li></ul></details><details open><summary><a href=#nextstep>NextStep</a></summary></details></ul></nav><h1><span class=section-number>1.1</span><span>Getting Started</span></h1><h2 id=対象環境>対象環境<a class=header-anchor href=#対象環境>¶</a></h2><p>本解説は Windows を対象環境としています。</p><h2 id=インストール>インストール<a class=header-anchor href=#インストール>¶</a></h2><p><a href=https://gohugo.io/>Hugo</a>のインストールがまだであればインストールしておきます。<code>v0.68</code>以上に対応しています（フロントマターで<a href=https://gohugo.io/content-management/build-options/#list>_buildオプションのlist</a>を使用しているため）。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=display:flex><span>hugo version
</span></span><span style=display:flex><span>:<span style=color:#75715e>: Hugo Static Site Generator vx.xx.x ...</span>
</span></span></code></pre></div><p>本テーマでは<a href=https://github.com/vivliostyle/vivliostyle-cli>vivliostyle-cli</a>を利用してPDF出力を行うため、<a href=https://nodejs.org/jp/>Node.js</a>上で動作するvivliostyle-cliのインストールを実施します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=display:flex><span>node -v
</span></span><span style=display:flex><span>:<span style=color:#75715e>: vX.X.X</span>
</span></span><span style=display:flex><span>:<span style=color:#75715e>: note: vivliostyle-cli is not working in Node v14.0.0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>npm -v
</span></span><span style=display:flex><span>:<span style=color:#75715e>: X.X.X</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>npm install -g @vivliostyle/cli
</span></span><span style=display:flex><span>vivliostyle -v
</span></span><span style=display:flex><span>:<span style=color:#75715e>: cli: X.X.X</span>
</span></span><span style=display:flex><span>:<span style=color:#75715e>: core: X.X.X</span>
</span></span></code></pre></div><h3 id=hugo-theme-vivliocliのインストール>hugo-theme-vivliocliのインストール<a class=header-anchor href=#hugo-theme-vivliocliのインストール>¶</a></h3><p>新しいプロジェクトを作成します。ここでは<code>myPDF</code>という名称とします。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=display:flex><span>hugo new site myPDF
</span></span><span style=display:flex><span><span style=color:#66d9ef>cd</span> myPDF
</span></span></code></pre></div><p>次にテーマをsubmoduleとして導入します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=display:flex><span>git init
</span></span><span style=display:flex><span>git submodule add https://github.com/mochimochiki/hugo-theme-vivliocli themes/hugo-theme-vivliocli
</span></span></code></pre></div><p>gitを利用しない場合は、<a href=https://github.com/mochimochiki/hugo-theme-vivliocli/archive/main.zip>zip</a>をダウンロード・解凍し、<code>themes/hugo-theme-vivliocil</code>に配置します。</p><h3 id=examplesiteからファイルをコピーする>exampleSiteからファイルをコピーする<a class=header-anchor href=#examplesiteからファイルをコピーする>¶</a></h3><p>テーマの中にテンプレートとして利用できるexampleSiteがあります。exampleSiteから必要なファイルをコピーします。また、デフォルトのconfig.tomlは削除しておきます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=display:flex><span>xcopy /s themes/hugo-theme-vivliocli/exampleSite/config config/
</span></span><span style=display:flex><span>xcopy /s themes/hugo-theme-vivliocli/exampleSite/CI CI/
</span></span><span style=display:flex><span>rm config.toml
</span></span></code></pre></div><h2 id=最初のサイトの作成>最初のサイトの作成<a class=header-anchor href=#最初のサイトの作成>¶</a></h2><h3 id=configtomlの編集>config.tomlの編集<a class=header-anchor href=#configtomlの編集>¶</a></h3><p><code>config/default.toml</code>を開き、以下の行をコメントアウトもしくは削除します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#a6e22e>themesdir</span> = <span style=color:#e6db74>&#34;../..&#34;</span>
</span></span></code></pre></div><p>また、baseURLを空文字にし、サイトタイトルを編集します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#a6e22e>baseURL</span> = <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>title</span> = <span style=color:#e6db74>&#34;My PDF Site&#34;</span>
</span></span></code></pre></div><h3 id=表紙の作成>表紙の作成<a class=header-anchor href=#表紙の作成>¶</a></h3><p><code>content</code>ディレクトリ下に<code>jp/firstpdf</code>,<code>en/firstpdf</code>ディレクトリを作成します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=display:flex><span><span style=color:#66d9ef>mkdir</span> content/jp/firstpdf
</span></span><span style=display:flex><span><span style=color:#66d9ef>mkdir</span> content/en/firstpdf
</span></span></code></pre></div><p>次に<code>jp/firstpdf/_pdf.md</code>ファイルを作成して以下のように編集し、文字コードUTF-8で保存します。このファイルはPDFの表紙/前書/目次となります。<code>_pdf.md</code>の配置されたディレクトリ下がPDF出力の単位となります。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>---
</span></span><span style=display:flex><span>pdfname :
</span></span><span style=display:flex><span>  default: <span style=color:#e6db74>&#39;firstpdf&#39;</span>
</span></span><span style=display:flex><span>doctitle:
</span></span><span style=display:flex><span>  default: <span style=color:#e6db74>&#39;My first pdf&#39;</span>
</span></span><span style=display:flex><span>subtitle:
</span></span><span style=display:flex><span>  default: <span style=color:#e6db74>&#39;subtitle&#39;</span>
</span></span><span style=display:flex><span>doc_number:
</span></span><span style=display:flex><span>  default: <span style=color:#e6db74>&#39;doc-number&#39;</span>
</span></span><span style=display:flex><span>header:
</span></span><span style=display:flex><span>  default: <span style=color:#e6db74>&#39;header&#39;</span>
</span></span><span style=display:flex><span>header2:
</span></span><span style=display:flex><span>  default: <span style=color:#e6db74>&#39;header2&#39;</span>
</span></span><span style=display:flex><span>footer-left:
</span></span><span style=display:flex><span>  default: <span style=color:#e6db74>&#39;left&#39;</span>
</span></span><span style=display:flex><span>footer-center:
</span></span><span style=display:flex><span>  default: <span style=color:#e6db74>&#39;center&#39;</span>
</span></span><span style=display:flex><span>footer-right:
</span></span><span style=display:flex><span>  default: <span style=color:#e6db74>&#39;right&#39;</span>
</span></span><span style=display:flex><span>author: <span style=color:#e6db74>&#39;auther&#39;</span>
</span></span><span style=display:flex><span>company: <span style=color:#e6db74>&#39;Company&#39;</span>
</span></span><span style=display:flex><span>logo: <span style=color:#e6db74>&#39;img/logo.png&#39;</span>
</span></span><span style=display:flex><span>pagesize: <span style=color:#e6db74>&#39;A4&#39;</span> <span style=color:#75715e># A4 / A3 / A4 landscape / A3 landscape</span>
</span></span><span style=display:flex><span>book: true
</span></span><span style=display:flex><span>cover: true <span style=color:#75715e># whether to output the cover page or not.</span>
</span></span><span style=display:flex><span>toc: true <span style=color:#75715e># whether to output toc or not. (if cover: false, always toc is not output)</span>
</span></span><span style=display:flex><span>sectionNumberLevel: <span style=color:#ae81ff>2</span> <span style=color:#75715e># override config.toml settings.</span>
</span></span><span style=display:flex><span>colophon: false <span style=color:#75715e># whether to output colophon page or not.</span>
</span></span><span style=display:flex><span>outputs:
</span></span><span style=display:flex><span>- vivlio_cover
</span></span><span style=display:flex><span>- vivlio_config
</span></span><span style=display:flex><span>---
</span></span></code></pre></div><div class=note><div class=note_title>Note</div><div class=note_content>詳細は<a href=../Configuration/pdfconfig.html>pdf configファイルの作成</a>を参照してください。</div></div><h3 id=記事の作成>記事の作成<a class=header-anchor href=#記事の作成>¶</a></h3><p>次に記事を作成します。<code>/content/jp/firstpdf</code>に<code>_index.md</code>を作成して以下のように編集します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md><span style=display:flex><span>---
</span></span><span style=display:flex><span>title: &#34;firstpdf&#34;
</span></span><span style=display:flex><span>weight: 10
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e6db74>`_index.md`</span>はサイト上のセクションページになります。PDFには含まれません。
</span></span></code></pre></div><p>また<code>/content/jp/firstpdf</code>下に<code>first.md</code>, <code>second.md</code>を作成して以下のように編集して保存します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md><span style=display:flex><span>---
</span></span><span style=display:flex><span>title: &#34;最初の記事&#34;
</span></span><span style=display:flex><span>weight: 10
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## 最初の記事
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>こんにちは。これは最初の記事です。
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md><span style=display:flex><span>---
</span></span><span style=display:flex><span>title: &#34;次の記事&#34;
</span></span><span style=display:flex><span>weight: 20
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## 次の記事
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>こんにちは。これは次の記事です。
</span></span></code></pre></div><p>以下のコマンドでHugoのプレビューを表示してメニューの<code>Languages</code> から<code>Japanese</code>を選択し、作成した記事が表示されることを確認します。記事を編集して保存すると、LiveReloadがかかり、プレビューも更新されます。</p><pre tabindex=0><code>hugo server --config config/default.toml
</code></pre><h3 id=ビルド>ビルド<a class=header-anchor href=#ビルド>¶</a></h3><p><code>Ctrl+C</code> でhugoのプレビューを終了し、以下のコマンドを実行してHugoサイトをビルドします。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=display:flex><span>hugo --config config/default.toml,config/pdf.toml
</span></span></code></pre></div><p><code>--config</code>オプションに<code>config/pdf.toml</code>を追加で指定することで、<code>/config/pdf.toml</code>の設定をオーバーライドしています。詳細は<a href=../Configuration/config.html>config.tomlの設定</a>を参照してください。</p><p>これで<code>/public_pdf</code>にHugoサイトがビルドされました。firstpdfは<code>/public_pdf/jp/firstpdf</code>に出力されているはずです。次にfirstpdfを<code>vivliostyle-cli</code>でPDF出力します。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=display:flex><span><span style=color:#66d9ef>cd</span> ./public_pdf/jp
</span></span><span style=display:flex><span><span style=color:#66d9ef>move</span> /Y firstpdf/_pdf.vivlio.config.js .
</span></span><span style=display:flex><span><span style=color:#66d9ef>move</span> /Y firstpdf/_pdf.vivlio.cover.html .
</span></span><span style=display:flex><span>vivliostyle build -c _pdf.vivlio.config.js
</span></span></code></pre></div><p><code>_pdf.vivlio.config.js</code>, <code>_pdf.vivlio.cover.html</code>を移動しています。これらは<code>_pdf.md</code>から生成されるVivliostyleのConfigファイルで、ビルド時に<code>/public_pdf/jp</code>直下に置く必要があります。</p><p><code>/public_pdf/jp/firstPDF.pdf</code>が成果物です。確認してみましょう。</p><h3 id=セクション番号をカスタマイズする>セクション番号をカスタマイズする<a class=header-anchor href=#セクション番号をカスタマイズする>¶</a></h3><p>成果物には1.1、などのセクション番号が付与されています。このセクション番号の出力レベルは<code>_pdf.md</code>でカスタマイズすることができます。<code>_pdf.md</code>を開き、以下の箇所を変更してみましょう。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sectionNumberLevel: <span style=color:#ae81ff>2</span> <span style=color:#75715e># -&gt; 1に変更</span>
</span></span></code></pre></div><p>また、トップレベルの出力形式やデリミタの設定は <code>/config/pdf.toml</code> で設定できます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>  <span style=color:#f92672>[</span>languages.jp.params<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>    sectionDelimiter <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;.&#34;</span>
</span></span><span style=display:flex><span>    sectionTopFormat <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;第%s章&#34;</span> <span style=color:#75715e># -&gt; &#34;Chapter %s&#34; に変更</span>
</span></span></code></pre></div><blockquote><p>その他のconfigパラメータについては<a href=../Configuration/config.html>config.tomlの設定</a>および<a href=https://gohugo.io/getting-started/configuration/>HUGO公式ドキュメント</a>などを参照してください。</p></blockquote><p>一旦<code>public_pdf</code>を消して、今度は<code>build_pdf.bat</code>でビルドしてみます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bat data-lang=bat><span style=display:flex><span><span style=color:#66d9ef>cd</span> ../..
</span></span><span style=display:flex><span><span style=color:#66d9ef>rmdir</span> public_pdf /s /q
</span></span><span style=display:flex><span><span style=color:#66d9ef>cd</span> CI/windows
</span></span><span style=display:flex><span>build_pdf.bat
</span></span></code></pre></div><blockquote><p>エラーが出力された場合、PDFを開いたままにしていないか確認してください。開いているとPDFの上書きに失敗します。</p></blockquote><p><code>public_pdf/jp/firstpdf.pdf</code> を見てみましょう。以下のことを確認します。</p><ul><li><code>sectionNumberLevel = 1</code>としたことでセクション番号がトップレベルのみ表示されている</li><li>同時にPDFの目次にもトップレベルのみが表示されるようになっている</li><li><code>sectionTopFormat</code>の指定を"Chapter %s"にしたことで「第1章」ではなく「Chapter 1」となっている</li></ul><h2 id=nextstep>NextStep<a class=header-anchor href=#nextstep>¶</a></h2><ul><li>PDFの表紙や奥付をカスタマイズするには&mldr;<ul><li><a href=../Configuration/config.html>config.tomlの設定</a></li><li><a href=../Configuration/pdfconfig.html>pdf configファイルの作成</a></li></ul></li><li>複数のエディションを作るには&mldr;<a href=../Configuration/edition.html>エディション</a></li></ul></div><script src=../../../js/menuscroll.min.js></script>
<script src=../../../js/copyclipboard.min.js></script></body></html>